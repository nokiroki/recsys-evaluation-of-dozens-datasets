!/bin/bash
mkdir -p ./data

confirm=$(wget --quiet --save-cookies /tmp/cookies.txt --keep-session-cookies --no-check-certificate 'https://docs.google.com/uc?export=download&id='1e4jt4BwYhAhEXzXwGXZ8as0okeyKgZO1 -O- | sed -rn 's/.*confirm=([0-9A-Za-z_]+).*/\1\n/p')
echo $confirm
wget --load-cookies /tmp/cookies.txt "https://docs.google.com/uc?export=download&confirm=$confirm&id=1e4jt4BwYhAhEXzXwGXZ8as0okeyKg ZO1" -O mts.zip && rm -rf /tmp/cookies.txt
mv mts.zip ./data/
unzip ./data/mts.zip -d ./data/mts_library
rm ./data/mts.zip

confirm=$(wget --quiet --save-cookies /tmp/cookies.txt --keep-session-cookies --no-check-certificate 'https://docs.google.com/uc?export=download&id='1p1muorQVSzOOS2Zb-asHBBGkOApIE9kQ -O- | sed -rn 's/.*confirm=([0-9A-Za-z_]+).*/\1\n/p')
echo $confirm
wget --load-cookies /tmp/cookies.txt "https://docs.google.com/uc?export=download&confirm=$confirm&id=1p1muorQVSzOOS2Zb-asHBBGkOApIE9kQ" -O netflix.zip && rm -rf /tmp/cookies.txt
mv netflix.zip ./data/
unzip ./data/netflix.zip -d ./data/netflix
rm ./data/netflix.zip

wget "https://files.grouplens.org/datasets/movielens/ml-20m.zip" -O movielense.zip --no-check-certificate
mv movielense.zip ./data/
unzip ./data/movielense.zip -d ./data/movielense
rm ./data/movielense.zip

# wget "https://jmcauley.ucsd.edu/data/amazon_v2/categoryFilesSmall/Movies_and_TV.csv" -O Movies_and_TV.csv --no-check-certificate
# mkdir ./data/amazon
# mv Movies_and_TV.csv ./data/amazon

confirm=$(wget --quiet --save-cookies /tmp/cookies.txt --keep-session-cookies --no-check-certificate 'https://docs.google.com/uc?export=download&id='1Ubl2yTPHu2XDg4YgkcqIFqY4ujqqEPaK -O- | sed -rn 's/.*confirm=([0-9A-Za-z_]+).*/\1\n/p')
echo $confirm
wget --load-cookies /tmp/cookies.txt "https://docs.google.com/uc?export=download&confirm=$confirm&id=1Ubl2yTPHu2XDg4YgkcqIFqY4ujqqEPaK" -O otto.zip && rm -rf /tmp/cookies.txt
mv otto.zip ./data/
unzip ./data/otto.zip -d ./data/otto
rm ./data/otto.zip

confirm=$(wget --quiet --save-cookies /tmp/cookies.txt --keep-session-cookies --no-check-certificate 'https://docs.google.com/uc?export=download&id='1N_UmPwZVGbjxLB4cIxYxYbuvHgDVGOvm -O- | sed -rn 's/.*confirm=([0-9A-Za-z_]+).*/\1\n/p')
echo $confirm
wget --load-cookies /tmp/cookies.txt "https://docs.google.com/uc?export=download&confirm=$confirm&id=1N_UmPwZVGbjxLB4cIxYxYbuvHgDVGOvm" -O dataset.tgz && rm -rf /tmp/cookies.txt
mv dataset.tgz data/KO
mkdir data/yahoo_music
tar -xvzf data/dataset.tgz -C data/yahoo_music
rm data/dataset.tgz data/yahoo_music/ydata-ymusic-kddcup-2011-track2.tar.bz2
tar -xjf data/yahoo_music/ydata-ymusic-kddcup-2011-track1.tar.bz2 -C data/yahoo_music
mv data/yahoo_music/ydata-ymusic-kddcup-2011-track1/* data/yahoo_music
rmdir data/yahoo_music/ydata-ymusic-kddcup-2011-track1
